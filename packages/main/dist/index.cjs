"use strict";
const electron = require("electron");
const url = require("url");
const path = require("path");
function _interopNamespace(e) {
  if (e && e.__esModule)
    return e;
  const n = Object.create(null, { [Symbol.toStringTag]: { value: "Module" } });
  if (e) {
    for (const k in e) {
      if (k !== "default") {
        const d = Object.getOwnPropertyDescriptor(e, k);
        Object.defineProperty(n, k, d.get ? d : {
          enumerable: true,
          get: () => e[k]
        });
      }
    }
  }
  n.default = e;
  return Object.freeze(n);
}
const ALLOWED_ORIGINS_AND_PERMISSIONS = /* @__PURE__ */ new Map([[new url.URL("http://localhost:5173/").origin, /* @__PURE__ */ new Set()]]);
const ALLOWED_EXTERNAL_ORIGINS = /* @__PURE__ */ new Set([
  "https://github.com"
]);
electron.app.on("web-contents-created", (_, contents) => {
  contents.on("will-navigate", (event, url$1) => {
    const { origin } = new url.URL(url$1);
    if (ALLOWED_ORIGINS_AND_PERMISSIONS.has(origin)) {
      return;
    }
    event.preventDefault();
    {
      console.warn("Blocked navigating to an unallowed origin:", origin);
    }
  });
  contents.session.setPermissionRequestHandler((webContents, permission, callback) => {
    var _a;
    const { origin } = new url.URL(webContents.getURL());
    const permissionGranted = !!((_a = ALLOWED_ORIGINS_AND_PERMISSIONS.get(origin)) == null ? void 0 : _a.has(permission));
    callback(permissionGranted);
    if (!permissionGranted && true) {
      console.warn(`${origin} requested permission for '${permission}', but was blocked.`);
    }
  });
  contents.setWindowOpenHandler(({ url: url$1 }) => {
    const { origin } = new url.URL(url$1);
    if (ALLOWED_EXTERNAL_ORIGINS.has(origin)) {
      electron.shell.openExternal(url$1).catch(console.error);
    } else {
      console.warn("Blocked the opening of an unallowed origin:", origin);
    }
    return { action: "deny" };
  });
  contents.on("will-attach-webview", (event, webPreferences, params) => {
    const { origin } = new url.URL(params.src);
    if (!ALLOWED_ORIGINS_AND_PERMISSIONS.has(origin)) {
      {
        console.warn(`A webview tried to attach ${params.src}, but was blocked.`);
      }
      event.preventDefault();
      return;
    }
    delete webPreferences.preload;
    delete webPreferences.preloadURL;
    webPreferences.nodeIntegration = false;
  });
});
async function createWindow() {
  const browserWindow = new electron.BrowserWindow({
    show: false,
    webPreferences: {
      webviewTag: false,
      preload: path.join(__dirname, "../../preload/dist/index.cjs")
    }
  });
  browserWindow.on("ready-to-show", () => {
    browserWindow == null ? void 0 : browserWindow.show();
    {
      browserWindow == null ? void 0 : browserWindow.webContents.openDevTools();
    }
  });
  const pageUrl = "http://localhost:5173/";
  await browserWindow.loadURL(pageUrl);
  return browserWindow;
}
async function restoreOrCreateWindow() {
  let window = electron.BrowserWindow.getAllWindows().find((w) => !w.isDestroyed());
  if (window === void 0) {
    window = await createWindow();
  }
  if (window.isMinimized()) {
    window.restore();
  }
  window.focus();
}
const isSingleInstance = electron.app.requestSingleInstanceLock();
if (!isSingleInstance) {
  electron.app.quit();
  process.exit(0);
}
electron.app.on("second-instance", restoreOrCreateWindow);
electron.app.disableHardwareAcceleration();
electron.app.on("window-all-closed", () => {
  if (process.platform !== "darwin") {
    electron.app.quit();
  }
});
electron.app.on("activate", restoreOrCreateWindow);
electron.app.whenReady().then(restoreOrCreateWindow).catch((e) => console.error("Failed create window:", e));
{
  electron.app.whenReady().then(() => Promise.resolve().then(() => /* @__PURE__ */ _interopNamespace(require("electron-devtools-installer")))).then(({ default: installExtension, REACT_DEVELOPER_TOOLS }) => installExtension(REACT_DEVELOPER_TOOLS, {
    loadExtensionOptions: {
      allowFileAccess: true
    }
  })).catch((e) => console.error("Failed install extension:", e));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguY2pzIiwic291cmNlcyI6WyIuLi9zcmMvc2VjdXJpdHktcmVzdHJpY3Rpb25zLnRzIiwiLi4vc3JjL21haW5XaW5kb3cudHMiLCIuLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHthcHAsIHNoZWxsfSBmcm9tICdlbGVjdHJvbic7XG5pbXBvcnQge1VSTH0gZnJvbSAndXJsJztcblxuLyoqXG4gKiBMaXN0IG9mIG9yaWdpbnMgdGhhdCB5b3UgYWxsb3cgb3BlbiBJTlNJREUgdGhlIGFwcGxpY2F0aW9uIGFuZCBwZXJtaXNzaW9ucyBmb3IgZWFjaCBvZiB0aGVtLlxuICpcbiAqIEluIGRldmVsb3BtZW50IG1vZGUgeW91IG5lZWQgYWxsb3cgb3BlbiBgVklURV9ERVZfU0VSVkVSX1VSTGBcbiAqL1xuY29uc3QgQUxMT1dFRF9PUklHSU5TX0FORF9QRVJNSVNTSU9OUyA9IG5ldyBNYXA8c3RyaW5nLCBTZXQ8J2NsaXBib2FyZC1yZWFkJyB8ICdtZWRpYScgfCAnZGlzcGxheS1jYXB0dXJlJyB8ICdtZWRpYUtleVN5c3RlbScgfCAnZ2VvbG9jYXRpb24nIHwgJ25vdGlmaWNhdGlvbnMnIHwgJ21pZGknIHwgJ21pZGlTeXNleCcgfCAncG9pbnRlckxvY2snIHwgJ2Z1bGxzY3JlZW4nIHwgJ29wZW5FeHRlcm5hbCcgfCAndW5rbm93bic+PihcbiAgaW1wb3J0Lm1ldGEuZW52LkRFViAmJiBpbXBvcnQubWV0YS5lbnYuVklURV9ERVZfU0VSVkVSX1VSTFxuICAgID8gW1tuZXcgVVJMKGltcG9ydC5tZXRhLmVudi5WSVRFX0RFVl9TRVJWRVJfVVJMKS5vcmlnaW4sIG5ldyBTZXRdXVxuICAgIDogW10sXG4pO1xuXG4vKipcbiAqIExpc3Qgb2Ygb3JpZ2lucyB0aGF0IHlvdSBhbGxvdyBvcGVuIElOIEJST1dTRVIuXG4gKiBOYXZpZ2F0aW9uIHRvIG9yaWdpbnMgYmVsb3cgaXMgcG9zc2libGUgb25seSBpZiB0aGUgbGluayBvcGVucyBpbiBhIG5ldyB3aW5kb3dcbiAqXG4gKiBAZXhhbXBsZVxuICogPGFcbiAqICAgdGFyZ2V0PVwiX2JsYW5rXCJcbiAqICAgaHJlZj1cImh0dHBzOi8vZ2l0aHViLmNvbS9cIlxuICogPlxuICovXG5jb25zdCBBTExPV0VEX0VYVEVSTkFMX09SSUdJTlMgPSBuZXcgU2V0PGBodHRwczovLyR7c3RyaW5nfWA+KFtcbiAgJ2h0dHBzOi8vZ2l0aHViLmNvbScsXG5dKTtcblxuXG5hcHAub24oJ3dlYi1jb250ZW50cy1jcmVhdGVkJywgKF8sIGNvbnRlbnRzKSA9PiB7XG5cbiAgLyoqXG4gICAqIEJsb2NrIG5hdmlnYXRpb24gdG8gb3JpZ2lucyBub3Qgb24gdGhlIGFsbG93bGlzdC5cbiAgICpcbiAgICogTmF2aWdhdGlvbiBpcyBhIGNvbW1vbiBhdHRhY2sgdmVjdG9yLiBJZiBhbiBhdHRhY2tlciBjYW4gY29udmluY2UgdGhlIGFwcCB0byBuYXZpZ2F0ZSBhd2F5XG4gICAqIGZyb20gaXRzIGN1cnJlbnQgcGFnZSwgdGhleSBjYW4gcG9zc2libHkgZm9yY2UgdGhlIGFwcCB0byBvcGVuIHdlYiBzaXRlcyBvbiB0aGUgSW50ZXJuZXQuXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZWxlY3Ryb25qcy5vcmcvZG9jcy9sYXRlc3QvdHV0b3JpYWwvc2VjdXJpdHkjMTMtZGlzYWJsZS1vci1saW1pdC1uYXZpZ2F0aW9uXG4gICAqL1xuICBjb250ZW50cy5vbignd2lsbC1uYXZpZ2F0ZScsIChldmVudCwgdXJsKSA9PiB7XG4gICAgY29uc3Qge29yaWdpbn0gPSBuZXcgVVJMKHVybCk7XG4gICAgaWYgKEFMTE9XRURfT1JJR0lOU19BTkRfUEVSTUlTU0lPTlMuaGFzKG9yaWdpbikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBQcmV2ZW50IG5hdmlnYXRpb25cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgaWYgKGltcG9ydC5tZXRhLmVudi5ERVYpIHtcbiAgICAgIGNvbnNvbGUud2FybignQmxvY2tlZCBuYXZpZ2F0aW5nIHRvIGFuIHVuYWxsb3dlZCBvcmlnaW46Jywgb3JpZ2luKTtcbiAgICB9XG4gIH0pO1xuXG5cbiAgLyoqXG4gICAqIEJsb2NrIHJlcXVlc3RlZCB1bmFsbG93ZWQgcGVybWlzc2lvbnMuXG4gICAqIEJ5IGRlZmF1bHQsIEVsZWN0cm9uIHdpbGwgYXV0b21hdGljYWxseSBhcHByb3ZlIGFsbCBwZXJtaXNzaW9uIHJlcXVlc3RzLlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmVsZWN0cm9uanMub3JnL2RvY3MvbGF0ZXN0L3R1dG9yaWFsL3NlY3VyaXR5IzUtaGFuZGxlLXNlc3Npb24tcGVybWlzc2lvbi1yZXF1ZXN0cy1mcm9tLXJlbW90ZS1jb250ZW50XG4gICAqL1xuICBjb250ZW50cy5zZXNzaW9uLnNldFBlcm1pc3Npb25SZXF1ZXN0SGFuZGxlcigod2ViQ29udGVudHMsIHBlcm1pc3Npb24sIGNhbGxiYWNrKSA9PiB7XG4gICAgY29uc3Qge29yaWdpbn0gPSBuZXcgVVJMKHdlYkNvbnRlbnRzLmdldFVSTCgpKTtcblxuICAgIGNvbnN0IHBlcm1pc3Npb25HcmFudGVkID0gISFBTExPV0VEX09SSUdJTlNfQU5EX1BFUk1JU1NJT05TLmdldChvcmlnaW4pPy5oYXMocGVybWlzc2lvbik7XG4gICAgY2FsbGJhY2socGVybWlzc2lvbkdyYW50ZWQpO1xuXG4gICAgaWYgKCFwZXJtaXNzaW9uR3JhbnRlZCAmJiBpbXBvcnQubWV0YS5lbnYuREVWKSB7XG4gICAgICBjb25zb2xlLndhcm4oYCR7b3JpZ2lufSByZXF1ZXN0ZWQgcGVybWlzc2lvbiBmb3IgJyR7cGVybWlzc2lvbn0nLCBidXQgd2FzIGJsb2NrZWQuYCk7XG4gICAgfVxuICB9KTtcblxuXG4gIC8qKlxuICAgKiBIeXBlcmxpbmtzIHRvIGFsbG93ZWQgc2l0ZXMgb3BlbiBpbiB0aGUgZGVmYXVsdCBicm93c2VyLlxuICAgKlxuICAgKiBUaGUgY3JlYXRpb24gb2YgbmV3IGB3ZWJDb250ZW50c2AgaXMgYSBjb21tb24gYXR0YWNrIHZlY3Rvci4gQXR0YWNrZXJzIGF0dGVtcHQgdG8gY29udmluY2UgdGhlIGFwcCB0byBjcmVhdGUgbmV3IHdpbmRvd3MsXG4gICAqIGZyYW1lcywgb3Igb3RoZXIgcmVuZGVyZXIgcHJvY2Vzc2VzIHdpdGggbW9yZSBwcml2aWxlZ2VzIHRoYW4gdGhleSBoYWQgYmVmb3JlOyBvciB3aXRoIHBhZ2VzIG9wZW5lZCB0aGF0IHRoZXkgY291bGRuJ3Qgb3BlbiBiZWZvcmUuXG4gICAqIFlvdSBzaG91bGQgZGVueSBhbnkgdW5leHBlY3RlZCB3aW5kb3cgY3JlYXRpb24uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZWxlY3Ryb25qcy5vcmcvZG9jcy9sYXRlc3QvdHV0b3JpYWwvc2VjdXJpdHkjMTQtZGlzYWJsZS1vci1saW1pdC1jcmVhdGlvbi1vZi1uZXctd2luZG93c1xuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmVsZWN0cm9uanMub3JnL2RvY3MvbGF0ZXN0L3R1dG9yaWFsL3NlY3VyaXR5IzE1LWRvLW5vdC11c2Utb3BlbmV4dGVybmFsLXdpdGgtdW50cnVzdGVkLWNvbnRlbnRcbiAgICovXG4gIGNvbnRlbnRzLnNldFdpbmRvd09wZW5IYW5kbGVyKCh7dXJsfSkgPT4ge1xuICAgIGNvbnN0IHtvcmlnaW59ID0gbmV3IFVSTCh1cmwpO1xuXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUeXBlIGNoZWNraW5nIGlzIHBlcmZvcm1lZCBpbiBydW50aW1lXG4gICAgaWYgKEFMTE9XRURfRVhURVJOQUxfT1JJR0lOUy5oYXMob3JpZ2luKSkge1xuICAgICAgLy8gT3BlbiBkZWZhdWx0IGJyb3dzZXJcbiAgICAgIHNoZWxsLm9wZW5FeHRlcm5hbCh1cmwpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuXG4gICAgfSBlbHNlIGlmIChpbXBvcnQubWV0YS5lbnYuREVWKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0Jsb2NrZWQgdGhlIG9wZW5pbmcgb2YgYW4gdW5hbGxvd2VkIG9yaWdpbjonLCBvcmlnaW4pO1xuICAgIH1cblxuICAgIC8vIFByZXZlbnQgY3JlYXRpbmcgbmV3IHdpbmRvdyBpbiBhcHBsaWNhdGlvblxuICAgIHJldHVybiB7YWN0aW9uOiAnZGVueSd9O1xuICB9KTtcblxuXG4gIC8qKlxuICAgKiBWZXJpZnkgd2VidmlldyBvcHRpb25zIGJlZm9yZSBjcmVhdGlvblxuICAgKlxuICAgKiBTdHJpcCBhd2F5IHByZWxvYWQgc2NyaXB0cywgZGlzYWJsZSBOb2RlLmpzIGludGVncmF0aW9uLCBhbmQgZW5zdXJlIG9yaWdpbnMgYXJlIG9uIHRoZSBhbGxvd2xpc3QuXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZWxlY3Ryb25qcy5vcmcvZG9jcy9sYXRlc3QvdHV0b3JpYWwvc2VjdXJpdHkjMTItdmVyaWZ5LXdlYnZpZXctb3B0aW9ucy1iZWZvcmUtY3JlYXRpb25cbiAgICovXG4gIGNvbnRlbnRzLm9uKCd3aWxsLWF0dGFjaC13ZWJ2aWV3JywgKGV2ZW50LCB3ZWJQcmVmZXJlbmNlcywgcGFyYW1zKSA9PiB7XG4gICAgY29uc3Qge29yaWdpbn0gPSBuZXcgVVJMKHBhcmFtcy5zcmMpO1xuICAgIGlmICghQUxMT1dFRF9PUklHSU5TX0FORF9QRVJNSVNTSU9OUy5oYXMob3JpZ2luKSkge1xuXG4gICAgICBpZiAoaW1wb3J0Lm1ldGEuZW52LkRFVikge1xuICAgICAgICBjb25zb2xlLndhcm4oYEEgd2VidmlldyB0cmllZCB0byBhdHRhY2ggJHtwYXJhbXMuc3JjfSwgYnV0IHdhcyBibG9ja2VkLmApO1xuICAgICAgfVxuXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFN0cmlwIGF3YXkgcHJlbG9hZCBzY3JpcHRzIGlmIHVudXNlZCBvciB2ZXJpZnkgdGhlaXIgbG9jYXRpb24gaXMgbGVnaXRpbWF0ZVxuICAgIGRlbGV0ZSB3ZWJQcmVmZXJlbmNlcy5wcmVsb2FkO1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgYHByZWxvYWRVUkxgIGV4aXN0cyAtIHNlZSBodHRwczovL3d3dy5lbGVjdHJvbmpzLm9yZy9kb2NzL2xhdGVzdC9hcGkvd2ViLWNvbnRlbnRzI2V2ZW50LXdpbGwtYXR0YWNoLXdlYnZpZXdcbiAgICBkZWxldGUgd2ViUHJlZmVyZW5jZXMucHJlbG9hZFVSTDtcblxuICAgIC8vIERpc2FibGUgTm9kZS5qcyBpbnRlZ3JhdGlvblxuICAgIHdlYlByZWZlcmVuY2VzLm5vZGVJbnRlZ3JhdGlvbiA9IGZhbHNlO1xuICB9KTtcbn0pO1xuIiwiaW1wb3J0IHtCcm93c2VyV2luZG93fSBmcm9tICdlbGVjdHJvbic7XG5pbXBvcnQge2pvaW59IGZyb20gJ3BhdGgnO1xuaW1wb3J0IHtVUkx9IGZyb20gJ3VybCc7XG5cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVdpbmRvdygpIHtcbiAgY29uc3QgYnJvd3NlcldpbmRvdyA9IG5ldyBCcm93c2VyV2luZG93KHtcbiAgICBzaG93OiBmYWxzZSwgLy8gVXNlICdyZWFkeS10by1zaG93JyBldmVudCB0byBzaG93IHdpbmRvd1xuICAgIHdlYlByZWZlcmVuY2VzOiB7XG4gICAgICB3ZWJ2aWV3VGFnOiBmYWxzZSwgLy8gVGhlIHdlYnZpZXcgdGFnIGlzIG5vdCByZWNvbW1lbmRlZC4gQ29uc2lkZXIgYWx0ZXJuYXRpdmVzIGxpa2UgaWZyYW1lIG9yIEVsZWN0cm9uJ3MgQnJvd3NlclZpZXcuIGh0dHBzOi8vd3d3LmVsZWN0cm9uanMub3JnL2RvY3MvbGF0ZXN0L2FwaS93ZWJ2aWV3LXRhZyN3YXJuaW5nXG4gICAgICBwcmVsb2FkOiBqb2luKF9fZGlybmFtZSwgJy4uLy4uL3ByZWxvYWQvZGlzdC9pbmRleC5janMnKSxcbiAgICB9LFxuICB9KTtcblxuICAvKipcbiAgICogSWYgeW91IGluc3RhbGwgYHNob3c6IHRydWVgIHRoZW4gaXQgY2FuIGNhdXNlIGlzc3VlcyB3aGVuIHRyeWluZyB0byBjbG9zZSB0aGUgd2luZG93LlxuICAgKiBVc2UgYHNob3c6IGZhbHNlYCBhbmQgbGlzdGVuZXIgZXZlbnRzIGByZWFkeS10by1zaG93YCB0byBmaXggdGhlc2UgaXNzdWVzLlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lbGVjdHJvbi9lbGVjdHJvbi9pc3N1ZXMvMjUwMTJcbiAgICovXG4gIGJyb3dzZXJXaW5kb3cub24oJ3JlYWR5LXRvLXNob3cnLCAoKSA9PiB7XG4gICAgYnJvd3NlcldpbmRvdz8uc2hvdygpO1xuXG4gICAgaWYgKGltcG9ydC5tZXRhLmVudi5ERVYpIHtcbiAgICAgIGJyb3dzZXJXaW5kb3c/LndlYkNvbnRlbnRzLm9wZW5EZXZUb29scygpO1xuICAgIH1cbiAgfSk7XG5cbiAgLyoqXG4gICAqIFVSTCBmb3IgbWFpbiB3aW5kb3cuXG4gICAqIFZpdGUgZGV2IHNlcnZlciBmb3IgZGV2ZWxvcG1lbnQuXG4gICAqIGBmaWxlOi8vLi4vcmVuZGVyZXIvaW5kZXguaHRtbGAgZm9yIHByb2R1Y3Rpb24gYW5kIHRlc3RcbiAgICovXG4gIGNvbnN0IHBhZ2VVcmwgPSBpbXBvcnQubWV0YS5lbnYuREVWICYmIGltcG9ydC5tZXRhLmVudi5WSVRFX0RFVl9TRVJWRVJfVVJMICE9PSB1bmRlZmluZWRcbiAgICA/IGltcG9ydC5tZXRhLmVudi5WSVRFX0RFVl9TRVJWRVJfVVJMXG4gICAgOiBuZXcgVVJMKCcuLi9yZW5kZXJlci9kaXN0L2luZGV4Lmh0bWwnLCAnZmlsZTovLycgKyBfX2Rpcm5hbWUpLnRvU3RyaW5nKCk7XG5cblxuICBhd2FpdCBicm93c2VyV2luZG93LmxvYWRVUkwocGFnZVVybCk7XG5cbiAgcmV0dXJuIGJyb3dzZXJXaW5kb3c7XG59XG5cbi8qKlxuICogUmVzdG9yZSBleGlzdGluZyBCcm93c2VyV2luZG93IG9yIENyZWF0ZSBuZXcgQnJvd3NlcldpbmRvd1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVzdG9yZU9yQ3JlYXRlV2luZG93KCkge1xuICBsZXQgd2luZG93ID0gQnJvd3NlcldpbmRvdy5nZXRBbGxXaW5kb3dzKCkuZmluZCh3ID0+ICF3LmlzRGVzdHJveWVkKCkpO1xuXG4gIGlmICh3aW5kb3cgPT09IHVuZGVmaW5lZCkge1xuICAgIHdpbmRvdyA9IGF3YWl0IGNyZWF0ZVdpbmRvdygpO1xuICB9XG5cbiAgaWYgKHdpbmRvdy5pc01pbmltaXplZCgpKSB7XG4gICAgd2luZG93LnJlc3RvcmUoKTtcbiAgfVxuXG4gIHdpbmRvdy5mb2N1cygpO1xufVxuIiwiaW1wb3J0IHthcHB9IGZyb20gJ2VsZWN0cm9uJztcbmltcG9ydCAnLi9zZWN1cml0eS1yZXN0cmljdGlvbnMnO1xuaW1wb3J0IHtyZXN0b3JlT3JDcmVhdGVXaW5kb3d9IGZyb20gJy9AL21haW5XaW5kb3cnO1xuXG5cbi8qKlxuICogUHJldmVudCBtdWx0aXBsZSBpbnN0YW5jZXNcbiAqL1xuY29uc3QgaXNTaW5nbGVJbnN0YW5jZSA9IGFwcC5yZXF1ZXN0U2luZ2xlSW5zdGFuY2VMb2NrKCk7XG5pZiAoIWlzU2luZ2xlSW5zdGFuY2UpIHtcbiAgYXBwLnF1aXQoKTtcbiAgcHJvY2Vzcy5leGl0KDApO1xufVxuYXBwLm9uKCdzZWNvbmQtaW5zdGFuY2UnLCByZXN0b3JlT3JDcmVhdGVXaW5kb3cpO1xuXG5cbi8qKlxuICogRGlzYWJsZSBIYXJkd2FyZSBBY2NlbGVyYXRpb24gZm9yIG1vcmUgcG93ZXItc2F2ZVxuICovXG5hcHAuZGlzYWJsZUhhcmR3YXJlQWNjZWxlcmF0aW9uKCk7XG5cbi8qKlxuICogU2hvdXQgZG93biBiYWNrZ3JvdW5kIHByb2Nlc3MgaWYgYWxsIHdpbmRvd3Mgd2FzIGNsb3NlZFxuICovXG5hcHAub24oJ3dpbmRvdy1hbGwtY2xvc2VkJywgKCkgPT4ge1xuICBpZiAocHJvY2Vzcy5wbGF0Zm9ybSAhPT0gJ2RhcndpbicpIHtcbiAgICBhcHAucXVpdCgpO1xuICB9XG59KTtcblxuLyoqXG4gKiBAc2VlIGh0dHBzOi8vd3d3LmVsZWN0cm9uanMub3JnL2RvY3MvdjE0LXgteS9hcGkvYXBwI2V2ZW50LWFjdGl2YXRlLW1hY29zIEV2ZW50OiAnYWN0aXZhdGUnXG4gKi9cbmFwcC5vbignYWN0aXZhdGUnLCByZXN0b3JlT3JDcmVhdGVXaW5kb3cpO1xuXG5cbi8qKlxuICogQ3JlYXRlIGFwcCB3aW5kb3cgd2hlbiBiYWNrZ3JvdW5kIHByb2Nlc3Mgd2lsbCBiZSByZWFkeVxuICovXG5hcHAud2hlblJlYWR5KClcbiAgLnRoZW4ocmVzdG9yZU9yQ3JlYXRlV2luZG93KVxuICAuY2F0Y2goKGUpID0+IGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCBjcmVhdGUgd2luZG93OicsIGUpKTtcblxuXG4vKipcbiAqIEluc3RhbGwgUmVhY3QuanMgb3Igc29tZSBvdGhlciBkZXZ0b29scyBpbiBkZXZlbG9wbWVudCBtb2RlIG9ubHlcbiAqL1xuaWYgKGltcG9ydC5tZXRhLmVudi5ERVYpIHtcbiAgYXBwLndoZW5SZWFkeSgpXG4gICAgLnRoZW4oKCkgPT4gaW1wb3J0KCdlbGVjdHJvbi1kZXZ0b29scy1pbnN0YWxsZXInKSlcbiAgICAudGhlbigoe2RlZmF1bHQ6IGluc3RhbGxFeHRlbnNpb24sIFJFQUNUX0RFVkVMT1BFUl9UT09MU30pID0+IGluc3RhbGxFeHRlbnNpb24oUkVBQ1RfREVWRUxPUEVSX1RPT0xTLCB7XG4gICAgICBsb2FkRXh0ZW5zaW9uT3B0aW9uczoge1xuICAgICAgICBhbGxvd0ZpbGVBY2Nlc3M6IHRydWUsXG4gICAgICB9LFxuICAgIH0pKVxuICAgIC5jYXRjaChlID0+IGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCBpbnN0YWxsIGV4dGVuc2lvbjonLCBlKSk7XG59XG5cbi8qKlxuICogQ2hlY2sgbmV3IGFwcCB2ZXJzaW9uIGluIHByb2R1Y3Rpb24gbW9kZSBvbmx5XG4gKi9cbmlmIChpbXBvcnQubWV0YS5lbnYuUFJPRCkge1xuICBhcHAud2hlblJlYWR5KClcbiAgICAudGhlbigoKSA9PiBpbXBvcnQoJ2VsZWN0cm9uLXVwZGF0ZXInKSlcbiAgICAudGhlbigoe2F1dG9VcGRhdGVyfSkgPT4gYXV0b1VwZGF0ZXIuY2hlY2tGb3JVcGRhdGVzQW5kTm90aWZ5KCkpXG4gICAgLmNhdGNoKChlKSA9PiBjb25zb2xlLmVycm9yKCdGYWlsZWQgY2hlY2sgdXBkYXRlczonLCBlKSk7XG59XG5cbiJdLCJuYW1lcyI6WyJVUkwiLCJhcHAiLCJ1cmwiLCJzaGVsbCIsIkJyb3dzZXJXaW5kb3ciLCJqb2luIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBUUEsTUFBTSxrQ0FBa0Msb0JBQUksSUFFdEMsQ0FBQyxDQUFDLElBQUlBLElBQUFBLElBQUksd0JBQW1DLEVBQUUsNEJBQVksS0FBRyxDQUFDLENBRXJFO0FBWUEsTUFBTSwrQ0FBK0IsSUFBeUI7QUFBQSxFQUM1RDtBQUNGLENBQUM7QUFHREMsU0FBQSxJQUFJLEdBQUcsd0JBQXdCLENBQUMsR0FBRyxhQUFhO0FBVTlDLFdBQVMsR0FBRyxpQkFBaUIsQ0FBQyxPQUFPQyxVQUFRO0FBQzNDLFVBQU0sRUFBQyxXQUFVLElBQUlGLElBQUEsSUFBSUUsS0FBRztBQUN4QixRQUFBLGdDQUFnQyxJQUFJLE1BQU0sR0FBRztBQUMvQztBQUFBLElBQ0Y7QUFHQSxVQUFNLGVBQWU7QUFFSTtBQUNmLGNBQUEsS0FBSyw4Q0FBOEMsTUFBTTtBQUFBLElBQ25FO0FBQUEsRUFBQSxDQUNEO0FBU0QsV0FBUyxRQUFRLDRCQUE0QixDQUFDLGFBQWEsWUFBWSxhQUFhOztBQUNsRixVQUFNLEVBQUMsV0FBVSxJQUFJRixJQUFJLElBQUEsWUFBWSxRQUFRO0FBRXZDLFVBQUEsb0JBQW9CLENBQUMsQ0FBQyx1Q0FBZ0MsSUFBSSxNQUFNLE1BQTFDLG1CQUE2QyxJQUFJO0FBQzdFLGFBQVMsaUJBQWlCO0FBRTFCLFFBQUksQ0FBQyxxQkFBcUIsTUFBcUI7QUFDckMsY0FBQSxLQUFLLEdBQUcsb0NBQW9DLCtCQUErQjtBQUFBLElBQ3JGO0FBQUEsRUFBQSxDQUNEO0FBYVEsV0FBQSxxQkFBcUIsQ0FBQyxFQUFDRSxLQUFBQSxZQUFTO0FBQ3ZDLFVB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
